<!-- Contact Section -->
<section id="call-to-action-2" class="call-to-action-2 section dark-background">

  <div class="container">
    <div class="row justify-content-center" data-aos="zoom-in" data-aos-delay="100">
      <div class="col-xl-10">
        <div class="text-center">
          <h3>Transform Your Business with GurutvaPay</h3>
          <p>At GurutvaPay, we specialize in innovative solutions that help businesses thrive in a digital-first world.
            Whether you're looking to improve your IT infrastructure or develop cutting-edge software, our team is here
            to help you succeed.</p>
          <a class="cta-btn"
            href="https://wa.me/919136914963?text=Hi,%20I%20would%20like%20to%20request%20a%20call%20to%20discuss%20my%20requirements."
            target="_blank">Get Started Today</a>
        </div>
      </div>
    </div>
  </div>

</section>

<!-- Contact Form Section -->
<section class="contact section light-background">
  <div id="contact" class="container section-title" data-aos="fade-up">
    <h2>Talk to Us</h2>
    <p>Let us help you build solutions that drive success. Reach out today for a consultation.</p>
  </div>

  <div class="container" data-aos="fade-up" data-aos-delay="100">
    <div class="row g-4 g-lg-5">
      <!-- Left Side Info -->
      <div class="col-lg-5">
        <div class="info-box" data-aos="fade-up" data-aos-delay="200">
          <h3>Our Contact Info</h3>
          <p>Get in touch with GurutvaPay for your digital transformation needs.</p>

          <div class="info-item" data-aos="fade-up" data-aos-delay="300">
            <div class="icon-box">
              <i class="bi bi-geo-alt"></i>
            </div>
            <div class="content">
              <h4>Our Location</h4>
              <a href="https://maps.app.goo.gl/3ZPcgo1JgnL5qDYk6" target="_blank">
                <p>Sh N B1/A Grd Flr Mahavir, Ngr,</p>
                <p>Deepak Hospital, Mira Road, Thane, </p>
                <p>Maharashtra - 401107</p>
              </a>
            </div>
          </div>

          <div class="info-item" data-aos="fade-up" data-aos-delay="400">
            <div class="icon-box">
              <i class="bi bi-telephone"></i>
            </div>
            <div class="content">
              <h4>Phone Number</h4>
              <p><a
                  href="https://wa.me/919136914963?text=Hi,%20I%20would%20like%20to%20request%20a%20call%20to%20discuss%20my%20requirements."
                  target="_blank">+91 91 369 14 963</a></p>
              <p><a href="tel:22 350 399 27">+91 22 350 399 27</a></p>
            </div>
          </div>

          <div class="info-item" data-aos="fade-up" data-aos-delay="500">
            <div class="icon-box">
              <i class="bi bi-envelope"></i>
            </div>
            <div class="content">
              <h4>Email Address</h4>
              <p><b>For Inquiry</b></p>
              <p><a href="mailto:info@gurutvapay.com">info@gurutvapay.com</a></p><br>
              <p><b>For Sales</b></p>
              <p><a href="mailto:sales@gurutvapay.com">sales@gurutvapay.com</a></p><br>
              <p><b>For Support</b></p>
              <p><a href="mailto:support@gurutvapay.com">support@gurutvapay.com</a></p><br>
              <p><b>For Partnership</b></p>
              <p><a href="mailto:partners@gurutvapay.com">partners@gurutvapay.com</a></p>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Side Form -->
      <div class="col-lg-7">
        <div class="contact-form" data-aos="fade-up" data-aos-delay="300">
          <h3>Get In Touch</h3>
          <p>We would love to hear about your requirement and how we can help you achieve your business goals.
            Fill out the form below and our team will reach out to you soon.</p>

          <form id="contactForm" action="https://jaikalki.com/api/submit" class="php-email-form" data-aos="fade-up"
            data-aos-delay="200">
            <div class="row gy-4">
              <div class="col-md-6">
                <input type="text" name="name" class="form-control" placeholder="Your Name" required>
              </div>
              <div class="col-md-6">
                <input type="email" name="email" class="form-control" placeholder="Your Email" required>
              </div>
              <div class="col-12">
                <select name="subject" class="form-control" required>
                  <option value="" disabled selected>Select Services</option>
                  <option value="Web Development">Web Development</option>
                  <option value="SEO and Rank Boost">SEO and Rank Boost</option>
                  <option value="GurutvaPay - Payment Solutions">GurutvaPay - Payment Solutions</option>
                </select>
              </div>
              <div class="col-12">
                <select name="reference" class="form-control" id="reference" required>
                  <option value="" disabled selected>How did you hear about us?</option>
                  <option value="Google">Google</option>
                  <option value="Facebook">Facebook</option>
                  <option value="Instagram">Instagram</option>
                  <option value="Friend">Friend</option>
                  <option value="Advertisement">Advertisement</option>
                  <option value="Other">Other</option>
                </select>
              </div>
              <div class="col-12">
                <input type="number" name="mobile" class="form-control" placeholder="Mobile" required>
              </div>
              <input type="hidden" id="user_ip" name="user_ip">
              <div class="col-12">
                <textarea name="message" class="form-control" rows="6" placeholder="Message" required></textarea>
              </div>

              <!-- Math Problem -->
              <div class="col-12">
                <label for="mathProblem">Solve this problem to submit the form:</label>
                <div id="mathProblem"><strong>Loading...</strong></div>
                <input type="number" name="math_answer" class="form-control" placeholder="Your Answer" required>
                <input type="hidden" id="correct_answer" name="correct_answer">
              </div>

              <div class="form-check">
                <input type="checkbox" class="form-check-input" id="agree_updates" name="agree_updates" value="yes"
                  required>
                <label class="form-check-label" for="agree_updates">
                  I agree to get updates, offer & promos via SMS, RCS & WhatsApp.
                </label>
              </div>

              <div class="col-12 mb-2 text-center">
                <a href="/terms" target="_blank">T & C</a> |
                <a href="/privacy" target="_blank">Privacy Policy</a>
              </div>

              <div class="col-12 text-center">
                <button type="submit" class="btn">Send Message</button>
              </div>
            </div>
          </form>

          <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

          <!-- âœ… Disable Button Until Fields Filled -->
          <script>
            document.addEventListener("DOMContentLoaded", function () {
              const form = document.getElementById("contactForm");
              const submitBtn = form.querySelector("button[type='submit']");
              const requiredFields = form.querySelectorAll("input[required], select[required], textarea[required]");

              // Disable by default
              submitBtn.disabled = true;
              submitBtn.style.opacity = "0.6";
              submitBtn.style.cursor = "not-allowed";

              function validateForm() {
                let allFilled = true;
                requiredFields.forEach((field) => {
                  if ((field.type === "checkbox" && !field.checked) || (field.type !== "checkbox" && !field.value.trim())) {
                    allFilled = false;
                  }
                });
                if (allFilled) {
                  submitBtn.disabled = false;
                  submitBtn.style.opacity = "1";
                  submitBtn.style.cursor = "pointer";
                } else {
                  submitBtn.disabled = true;
                  submitBtn.style.opacity = "0.6";
                  submitBtn.style.cursor = "not-allowed";
                }
              }

              requiredFields.forEach((field) => {
                field.addEventListener("input", validateForm);
                field.addEventListener("change", validateForm);
              });
            });
          </script>

          <!-- Math Problem Loader -->
          <script>
            document.addEventListener("DOMContentLoaded", async function () {
              try {
                const response = await fetch("https://jaikalki.com/api/get_math_problem");
                const data = await response.json();
                if (response.ok) {
                  document.getElementById("mathProblem").innerHTML = `<strong>${data.num1} + ${data.num2} = ?</strong>`;
                  document.querySelector("input[name='correct_answer']").value = data.correct_answer;
                }
              } catch (error) {
                console.error("Error fetching math problem:", error);
              }
            });
          </script>

          <!-- Submit Form -->
          <script>
            document.getElementById('contactForm').addEventListener('submit', async function (e) {
              e.preventDefault();
              const formData = new FormData(this);
              const jsonData = {};
              formData.forEach((value, key) => {
                jsonData[key] = value;
              });

              try {
                const response = await fetch(this.action, {
                  method: 'POST',
                  headers: { 'Content-Type': 'application/json' },
                  body: JSON.stringify(jsonData),
                });

                if (response.ok) {
                  const data = await response.json();
                  Swal.fire('Success', data.message, 'success');
                  this.reset();
                } else {
                  const errorData = await response.json();
                  Swal.fire('Error', errorData.error || 'Something went wrong!', 'error');
                }
              } catch (error) {
                Swal.fire('Error', 'Unable to submit your request. Please try again later.', 'error');
              }
            });
          </script>

        </div>
      </div>
    </div>
  </div>
</section>

<script>
  async function getUserIP() {
    try {
      let response = await fetch("https://api64.ipify.org?format=json");
      let data = await response.json();
      document.getElementById("user_ip").value = data.ip;
    } catch (error) {
      console.error("Error fetching IP:", error);
    }
  }
  getUserIP();
</script>
